:github-icon: pass:[<svg class="icon"><use href="#github-icon"/></svg>]
:VestingWalletConfidential: pass:normal[xref:finance.adoc#VestingWalletConfidential[`VestingWalletConfidential`]]
:VestingWalletCliffConfidential: pass:normal[xref:finance.adoc#VestingWalletCliffConfidential[`VestingWalletCliffConfidential`]]
:VestingWalletConfidential: pass:normal[xref:finance.adoc#VestingWalletConfidential[`VestingWalletConfidential`]]
:VestingWalletCliffExecutorConfidential: pass:normal[xref:finance.adoc#VestingWalletCliffExecutorConfidential[`VestingWalletCliffExecutorConfidential`]]
:ERC7821WithExecutor: pass:normal[xref:finance.adoc#ERC7821WithExecutor[`ERC7821WithExecutor`]]
:VestingWalletCliffExecutorConfidentialFactory: pass:normal[xref:finance.adoc#VestingWalletCliffExecutorConfidentialFactory[`VestingWalletCliffExecutorConfidentialFactory`]]
:IConfidentialFungibleToken: pass:normal[xref:interfaces.adoc#IConfidentialFungibleToken[`IConfidentialFungibleToken`]]
:VestingWalletConfidential: pass:normal[xref:finance.adoc#VestingWalletConfidential[`VestingWalletConfidential`]]
:VestingWalletConfidential: pass:normal[xref:finance.adoc#VestingWalletConfidential[`VestingWalletConfidential`]]
:VestingWalletConfidential-start: pass:normal[xref:finance.adoc#VestingWalletConfidential-start--[`VestingWalletConfidential.start`]]
:VestingWalletCliffExecutorConfidential: pass:normal[xref:finance.adoc#VestingWalletCliffExecutorConfidential[`VestingWalletCliffExecutorConfidential`]]
:VestingWalletCliffConfidential: pass:normal[xref:finance.adoc#VestingWalletCliffConfidential[`VestingWalletCliffConfidential`]]
:ERC7821WithExecutor: pass:normal[xref:finance.adoc#ERC7821WithExecutor[`ERC7821WithExecutor`]]

= Finance

[.readme-notice]
NOTE: This document is better viewed at https://docs.openzeppelin.com/confidential-contracts/api#finance

This directory includes primitives for on-chain confidential financial systems:

- {VestingWalletConfidential}: Handles the vesting of confidential tokens for a given beneficiary. Custody of multiple tokens can be given to this contract, which will release the token to the beneficiary following a given, customizable, vesting schedule.
- {VestingWalletCliffConfidential}: Variant of {VestingWalletConfidential} which adds a cliff period to the vesting schedule.

For convenience, this directory also includes:

- {VestingWalletCliffExecutorConfidential}: A Default implementation of `VestingWalletConfidential` which implements both `VestingWalletCliffConfidential` and execution via {ERC7821WithExecutor}.
- {VestingWalletCliffExecutorConfidentialFactory}: A factory which allows creating `VestingWalletCliffExecutorConfidential` in batch.

== Contracts
:VestingWalletStorage: pass:normal[xref:#VestingWalletConfidential-VestingWalletStorage[`++VestingWalletStorage++`]]
:VestingWalletConfidentialTokenReleased: pass:normal[xref:#VestingWalletConfidential-VestingWalletConfidentialTokenReleased-address-euint64-[`++VestingWalletConfidentialTokenReleased++`]]
:start: pass:normal[xref:#VestingWalletConfidential-start--[`++start++`]]
:duration: pass:normal[xref:#VestingWalletConfidential-duration--[`++duration++`]]
:end: pass:normal[xref:#VestingWalletConfidential-end--[`++end++`]]
:released: pass:normal[xref:#VestingWalletConfidential-released-address-[`++released++`]]
:releasable: pass:normal[xref:#VestingWalletConfidential-releasable-address-[`++releasable++`]]
:release: pass:normal[xref:#VestingWalletConfidential-release-address-[`++release++`]]
:vestedAmount: pass:normal[xref:#VestingWalletConfidential-vestedAmount-address-uint64-[`++vestedAmount++`]]
:__VestingWalletConfidential_init: pass:normal[xref:#VestingWalletConfidential-__VestingWalletConfidential_init-address-uint48-uint48-[`++__VestingWalletConfidential_init++`]]
:_vestingSchedule: pass:normal[xref:#VestingWalletConfidential-_vestingSchedule-euint128-uint64-[`++_vestingSchedule++`]]

:start-: pass:normal[xref:#VestingWalletConfidential-start--[`++start++`]]
:duration-: pass:normal[xref:#VestingWalletConfidential-duration--[`++duration++`]]
:end-: pass:normal[xref:#VestingWalletConfidential-end--[`++end++`]]
:released-address: pass:normal[xref:#VestingWalletConfidential-released-address-[`++released++`]]
:releasable-address: pass:normal[xref:#VestingWalletConfidential-releasable-address-[`++releasable++`]]
:release-address: pass:normal[xref:#VestingWalletConfidential-release-address-[`++release++`]]
:vestedAmount-address-uint64: pass:normal[xref:#VestingWalletConfidential-vestedAmount-address-uint64-[`++vestedAmount++`]]
:__VestingWalletConfidential_init-address-uint48-uint48: pass:normal[xref:#VestingWalletConfidential-__VestingWalletConfidential_init-address-uint48-uint48-[`++__VestingWalletConfidential_init++`]]
:_vestingSchedule-euint128-uint64: pass:normal[xref:#VestingWalletConfidential-_vestingSchedule-euint128-uint64-[`++_vestingSchedule++`]]

[.contract]
[[VestingWalletConfidential]]
=== `++VestingWalletConfidential++` link:https://github.com/OpenZeppelin/openzeppelin-confidential-contracts/blob/master/contracts/finance/VestingWalletConfidential.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "@openzeppelin/confidential-contracts/finance/VestingWalletConfidential.sol";
```

A vesting wallet is an ownable contract that can receive ConfidentialFungibleTokens, and release these
assets to the wallet owner, also referred to as "beneficiary", according to a vesting schedule.

Any assets transferred to this contract will follow the vesting schedule as if they were locked from the beginning.
Consequently, if the vesting has already started, any amount of tokens sent to this contract will (at least partly)
be immediately releasable.

By setting the duration to 0, one can configure this contract to behave like an asset timelock that holds tokens for
a beneficiary until a specified time.

NOTE: Since the wallet is `Ownable`, and ownership can be transferred, it is possible to sell unvested tokens.

NOTE: When using this contract with any token whose balance is adjusted automatically (i.e. a rebase token), make
sure to account the supply/balance adjustment in the vesting schedule to ensure the vested amount is as intended.

[.contract-index]
.Functions
--
* `++start()++`
* `++duration()++`
* `++end()++`
* `++released(token)++`
* `++releasable(token)++`
* `++release(token)++`
* `++vestedAmount(token, timestamp)++`
* `++__VestingWalletConfidential_init(beneficiary, startTimestamp, durationSeconds)++`
* `++_vestingSchedule(totalAllocation, timestamp)++`

[.contract-subindex-inherited]
.ReentrancyGuardTransient
* `++_reentrancyGuardEntered()++`

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++__Ownable_init(initialOwner)++`
* `++__Ownable_init_unchained(initialOwner)++`
* `++owner()++`
* `++_checkOwner()++`
* `++renounceOwnership()++`
* `++transferOwnership(newOwner)++`
* `++_transferOwnership(newOwner)++`

[.contract-subindex-inherited]
.ContextUpgradeable
* `++__Context_init()++`
* `++__Context_init_unchained()++`
* `++_msgSender()++`
* `++_msgData()++`
* `++_contextSuffixLength()++`

[.contract-subindex-inherited]
.Initializable
* `++_checkInitializing()++`
* `++_disableInitializers()++`
* `++_getInitializedVersion()++`
* `++_isInitializing()++`
* `++_initializableStorageSlot()++`

--

[.contract-index]
.Events
--
* `++VestingWalletConfidentialTokenReleased(token, amount)++`

[.contract-subindex-inherited]
.ReentrancyGuardTransient

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++OwnershipTransferred(previousOwner, newOwner)++`

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable
* `++Initialized(version)++`

--

[.contract-index]
.Errors
--

[.contract-subindex-inherited]
.ReentrancyGuardTransient
* `++ReentrancyGuardReentrantCall()++`

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++OwnableUnauthorizedAccount(account)++`
* `++OwnableInvalidOwner(owner)++`

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable
* `++InvalidInitialization()++`
* `++NotInitializing()++`

--

[.contract-item]
[[VestingWalletConfidential-start--]]
==== `[.contract-item-name]#++start++#++() → uint64++` [.item-kind]#public#

Timestamp at which the vesting starts.

[.contract-item]
[[VestingWalletConfidential-duration--]]
==== `[.contract-item-name]#++duration++#++() → uint64++` [.item-kind]#public#

Duration of the vesting in seconds.

[.contract-item]
[[VestingWalletConfidential-end--]]
==== `[.contract-item-name]#++end++#++() → uint64++` [.item-kind]#public#

Timestamp at which the vesting ends.

[.contract-item]
[[VestingWalletConfidential-released-address-]]
==== `[.contract-item-name]#++released++#++(address token) → euint64++` [.item-kind]#public#

Amount of token already released

[.contract-item]
[[VestingWalletConfidential-releasable-address-]]
==== `[.contract-item-name]#++releasable++#++(address token) → euint64++` [.item-kind]#public#

Getter for the amount of releasable `token` tokens. `token` should be the address of an
{IConfidentialFungibleToken} contract.

[.contract-item]
[[VestingWalletConfidential-release-address-]]
==== `[.contract-item-name]#++release++#++(address token)++` [.item-kind]#public#

Release the tokens that have already vested.

Emits a {VestingWalletConfidentialTokenReleased} event.

[.contract-item]
[[VestingWalletConfidential-vestedAmount-address-uint64-]]
==== `[.contract-item-name]#++vestedAmount++#++(address token, uint64 timestamp) → euint128++` [.item-kind]#public#

Calculates the amount of tokens that has already vested. Default implementation is a linear vesting curve.

[.contract-item]
[[VestingWalletConfidential-__VestingWalletConfidential_init-address-uint48-uint48-]]
==== `[.contract-item-name]#++__VestingWalletConfidential_init++#++(address beneficiary, uint48 startTimestamp, uint48 durationSeconds)++` [.item-kind]#internal#

Initializes the vesting wallet for a given `beneficiary` with a start time of `startTimestamp`
and an end time of `startTimestamp + durationSeconds`.

[.contract-item]
[[VestingWalletConfidential-_vestingSchedule-euint128-uint64-]]
==== `[.contract-item-name]#++_vestingSchedule++#++(euint128 totalAllocation, uint64 timestamp) → euint128++` [.item-kind]#internal#

This returns the amount vested, as a function of time, for an asset given its total historical allocation.

[.contract-item]
[[VestingWalletConfidential-VestingWalletConfidentialTokenReleased-address-euint64-]]
==== `[.contract-item-name]#++VestingWalletConfidentialTokenReleased++#++(address indexed token, euint64 amount)++` [.item-kind]#event#

:VestingWalletCliffStorage: pass:normal[xref:#VestingWalletCliffConfidential-VestingWalletCliffStorage[`++VestingWalletCliffStorage++`]]
:VestingWalletCliffConfidentialInvalidCliffDuration: pass:normal[xref:#VestingWalletCliffConfidential-VestingWalletCliffConfidentialInvalidCliffDuration-uint64-uint64-[`++VestingWalletCliffConfidentialInvalidCliffDuration++`]]
:cliff: pass:normal[xref:#VestingWalletCliffConfidential-cliff--[`++cliff++`]]
:__VestingWalletCliffConfidential_init: pass:normal[xref:#VestingWalletCliffConfidential-__VestingWalletCliffConfidential_init-uint48-[`++__VestingWalletCliffConfidential_init++`]]
:_vestingSchedule: pass:normal[xref:#VestingWalletCliffConfidential-_vestingSchedule-euint128-uint64-[`++_vestingSchedule++`]]

:cliff-: pass:normal[xref:#VestingWalletCliffConfidential-cliff--[`++cliff++`]]
:__VestingWalletCliffConfidential_init-uint48: pass:normal[xref:#VestingWalletCliffConfidential-__VestingWalletCliffConfidential_init-uint48-[`++__VestingWalletCliffConfidential_init++`]]
:_vestingSchedule-euint128-uint64: pass:normal[xref:#VestingWalletCliffConfidential-_vestingSchedule-euint128-uint64-[`++_vestingSchedule++`]]

[.contract]
[[VestingWalletCliffConfidential]]
=== `++VestingWalletCliffConfidential++` link:https://github.com/OpenZeppelin/openzeppelin-confidential-contracts/blob/master/contracts/finance/VestingWalletCliffConfidential.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "@openzeppelin/confidential-contracts/finance/VestingWalletCliffConfidential.sol";
```

An extension of {VestingWalletConfidential} that adds a cliff to the vesting schedule. The cliff is `cliffSeconds` long and
starts at the vesting start timestamp (see {VestingWalletConfidential}).

[.contract-index]
.Functions
--
* `++cliff()++`
* `++__VestingWalletCliffConfidential_init(cliffSeconds)++`
* `++_vestingSchedule(totalAllocation, timestamp)++`

[.contract-subindex-inherited]
.VestingWalletConfidential
* `++start()++`
* `++duration()++`
* `++end()++`
* `++released(token)++`
* `++releasable(token)++`
* `++release(token)++`
* `++vestedAmount(token, timestamp)++`
* `++__VestingWalletConfidential_init(beneficiary, startTimestamp, durationSeconds)++`

[.contract-subindex-inherited]
.ReentrancyGuardTransient
* `++_reentrancyGuardEntered()++`

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++__Ownable_init(initialOwner)++`
* `++__Ownable_init_unchained(initialOwner)++`
* `++owner()++`
* `++_checkOwner()++`
* `++renounceOwnership()++`
* `++transferOwnership(newOwner)++`
* `++_transferOwnership(newOwner)++`

[.contract-subindex-inherited]
.ContextUpgradeable
* `++__Context_init()++`
* `++__Context_init_unchained()++`
* `++_msgSender()++`
* `++_msgData()++`
* `++_contextSuffixLength()++`

[.contract-subindex-inherited]
.Initializable
* `++_checkInitializing()++`
* `++_disableInitializers()++`
* `++_getInitializedVersion()++`
* `++_isInitializing()++`
* `++_initializableStorageSlot()++`

--

[.contract-index]
.Events
--

[.contract-subindex-inherited]
.VestingWalletConfidential
* `++VestingWalletConfidentialTokenReleased(token, amount)++`

[.contract-subindex-inherited]
.ReentrancyGuardTransient

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++OwnershipTransferred(previousOwner, newOwner)++`

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable
* `++Initialized(version)++`

--

[.contract-index]
.Errors
--
* `++VestingWalletCliffConfidentialInvalidCliffDuration(cliffSeconds, durationSeconds)++`

[.contract-subindex-inherited]
.VestingWalletConfidential

[.contract-subindex-inherited]
.ReentrancyGuardTransient
* `++ReentrancyGuardReentrantCall()++`

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++OwnableUnauthorizedAccount(account)++`
* `++OwnableInvalidOwner(owner)++`

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable
* `++InvalidInitialization()++`
* `++NotInitializing()++`

--

[.contract-item]
[[VestingWalletCliffConfidential-cliff--]]
==== `[.contract-item-name]#++cliff++#++() → uint64++` [.item-kind]#public#

The timestamp at which the cliff ends.

[.contract-item]
[[VestingWalletCliffConfidential-__VestingWalletCliffConfidential_init-uint48-]]
==== `[.contract-item-name]#++__VestingWalletCliffConfidential_init++#++(uint48 cliffSeconds)++` [.item-kind]#internal#

Set the duration of the cliff, in seconds. The cliff starts at the vesting
start timestamp (see {VestingWalletConfidential-start}) and ends `cliffSeconds` later.

[.contract-item]
[[VestingWalletCliffConfidential-_vestingSchedule-euint128-uint64-]]
==== `[.contract-item-name]#++_vestingSchedule++#++(euint128 totalAllocation, uint64 timestamp) → euint128++` [.item-kind]#internal#

This function returns the amount vested, as a function of time, for
an asset given its total historical allocation. Returns 0 if the {cliff} timestamp is not met.

IMPORTANT: The cliff not only makes the schedule return 0, but it also ignores every possible side
effect from calling the inherited implementation (i.e. `super._vestingSchedule`). Carefully consider
this caveat if the overridden implementation of this function has any (e.g. writing to memory or reverting).

[.contract-item]
[[VestingWalletCliffConfidential-VestingWalletCliffConfidentialInvalidCliffDuration-uint64-uint64-]]
==== `[.contract-item-name]#++VestingWalletCliffConfidentialInvalidCliffDuration++#++(uint64 cliffSeconds, uint64 durationSeconds)++` [.item-kind]#error#

The specified cliff duration is larger than the vesting duration.

:VestingPlan: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-VestingPlan[`++VestingPlan++`]]
:VestingWalletConfidentialFunded: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-VestingWalletConfidentialFunded-address-address-address-euint64-uint48-uint48-uint48-address-[`++VestingWalletConfidentialFunded++`]]
:VestingWalletConfidentialCreated: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-VestingWalletConfidentialCreated-address-address-uint48-uint48-uint48-address-[`++VestingWalletConfidentialCreated++`]]
:batchFundVestingWalletConfidential: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-batchFundVestingWalletConfidential-address-struct-VestingWalletCliffExecutorConfidentialFactory-VestingPlan---address-bytes-[`++batchFundVestingWalletConfidential++`]]
:createVestingWalletConfidential: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-createVestingWalletConfidential-address-uint48-uint48-uint48-address-[`++createVestingWalletConfidential++`]]
:predictVestingWalletConfidential: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-predictVestingWalletConfidential-address-uint48-uint48-uint48-address-[`++predictVestingWalletConfidential++`]]
:_getCreate2VestingWalletConfidentialSalt: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-_getCreate2VestingWalletConfidentialSalt-address-uint48-uint48-uint48-address-[`++_getCreate2VestingWalletConfidentialSalt++`]]

:batchFundVestingWalletConfidential-address-struct-VestingWalletCliffExecutorConfidentialFactory-VestingPlan---address-bytes: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-batchFundVestingWalletConfidential-address-struct-VestingWalletCliffExecutorConfidentialFactory-VestingPlan---address-bytes-[`++batchFundVestingWalletConfidential++`]]
:createVestingWalletConfidential-address-uint48-uint48-uint48-address: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-createVestingWalletConfidential-address-uint48-uint48-uint48-address-[`++createVestingWalletConfidential++`]]
:predictVestingWalletConfidential-address-uint48-uint48-uint48-address: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-predictVestingWalletConfidential-address-uint48-uint48-uint48-address-[`++predictVestingWalletConfidential++`]]
:_getCreate2VestingWalletConfidentialSalt-address-uint48-uint48-uint48-address: pass:normal[xref:#VestingWalletCliffExecutorConfidentialFactory-_getCreate2VestingWalletConfidentialSalt-address-uint48-uint48-uint48-address-[`++_getCreate2VestingWalletConfidentialSalt++`]]

[.contract]
[[VestingWalletCliffExecutorConfidentialFactory]]
=== `++VestingWalletCliffExecutorConfidentialFactory++` link:https://github.com/OpenZeppelin/openzeppelin-confidential-contracts/blob/master/contracts/finance/VestingWalletCliffExecutorConfidentialFactory.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "@openzeppelin/confidential-contracts/finance/VestingWalletCliffExecutorConfidentialFactory.sol";
```

This factory enables creating {VestingWalletCliffExecutorConfidential} in batch.

Confidential vesting wallets created inherit both {VestingWalletCliffConfidential} for vesting cliffs
and {ERC7821WithExecutor} to allow for arbitrary calls to be executed from the vesting wallet.

[.contract-index]
.Functions
--
* `++batchFundVestingWalletConfidential(confidentialFungibleToken, vestingPlans, executor, inputProof)++`
* `++createVestingWalletConfidential(beneficiary, startTimestamp, durationSeconds, cliffSeconds, executor)++`
* `++predictVestingWalletConfidential(beneficiary, startTimestamp, durationSeconds, cliffSeconds, executor)++`
* `++_getCreate2VestingWalletConfidentialSalt(beneficiary, startTimestamp, durationSeconds, cliffSeconds, executor)++`

--

[.contract-index]
.Events
--
* `++VestingWalletConfidentialFunded(vestingWalletConfidential, beneficiary, confidentialFungibleToken, encryptedAmount, startTimestamp, durationSeconds, cliffSeconds, executor)++`
* `++VestingWalletConfidentialCreated(vestingWalletConfidential, beneficiary, startTimestamp, durationSeconds, cliffSeconds, executor)++`

--

[.contract-item]
[[VestingWalletCliffExecutorConfidentialFactory-batchFundVestingWalletConfidential-address-struct-VestingWalletCliffExecutorConfidentialFactory-VestingPlan---address-bytes-]]
==== `[.contract-item-name]#++batchFundVestingWalletConfidential++#++(address confidentialFungibleToken, struct VestingWalletCliffExecutorConfidentialFactory.VestingPlan[] vestingPlans, address executor, bytes inputProof)++` [.item-kind]#public#

Batches the funding of multiple confidential vesting wallets.

Funds are sent to deterministic wallet addresses. Wallets can be created either
before or after this operation.

Emits a {VestingWalletConfidentialFunded} event for each funded vesting plan.

[.contract-item]
[[VestingWalletCliffExecutorConfidentialFactory-createVestingWalletConfidential-address-uint48-uint48-uint48-address-]]
==== `[.contract-item-name]#++createVestingWalletConfidential++#++(address beneficiary, uint48 startTimestamp, uint48 durationSeconds, uint48 cliffSeconds, address executor) → address++` [.item-kind]#public#

Creates a confidential vesting wallet.

Emits a {VestingWalletConfidentialCreated}.

[.contract-item]
[[VestingWalletCliffExecutorConfidentialFactory-predictVestingWalletConfidential-address-uint48-uint48-uint48-address-]]
==== `[.contract-item-name]#++predictVestingWalletConfidential++#++(address beneficiary, uint48 startTimestamp, uint48 durationSeconds, uint48 cliffSeconds, address executor) → address++` [.item-kind]#public#

Predicts deterministic address for a confidential vesting wallet.

[.contract-item]
[[VestingWalletCliffExecutorConfidentialFactory-_getCreate2VestingWalletConfidentialSalt-address-uint48-uint48-uint48-address-]]
==== `[.contract-item-name]#++_getCreate2VestingWalletConfidentialSalt++#++(address beneficiary, uint48 startTimestamp, uint48 durationSeconds, uint48 cliffSeconds, address executor) → bytes32++` [.item-kind]#internal#

Gets create2 salt for a confidential vesting wallet.

[.contract-item]
[[VestingWalletCliffExecutorConfidentialFactory-VestingWalletConfidentialFunded-address-address-address-euint64-uint48-uint48-uint48-address-]]
==== `[.contract-item-name]#++VestingWalletConfidentialFunded++#++(address indexed vestingWalletConfidential, address indexed beneficiary, address indexed confidentialFungibleToken, euint64 encryptedAmount, uint48 startTimestamp, uint48 durationSeconds, uint48 cliffSeconds, address executor)++` [.item-kind]#event#

[.contract-item]
[[VestingWalletCliffExecutorConfidentialFactory-VestingWalletConfidentialCreated-address-address-uint48-uint48-uint48-address-]]
==== `[.contract-item-name]#++VestingWalletConfidentialCreated++#++(address indexed vestingWalletConfidential, address indexed beneficiary, uint48 startTimestamp, uint48 durationSeconds, uint48 cliffSeconds, address indexed executor)++` [.item-kind]#event#

:constructor: pass:normal[xref:#VestingWalletCliffExecutorConfidential-constructor--[`++constructor++`]]
:initialize: pass:normal[xref:#VestingWalletCliffExecutorConfidential-initialize-address-uint48-uint48-uint48-address-[`++initialize++`]]

:constructor-: pass:normal[xref:#VestingWalletCliffExecutorConfidential-constructor--[`++constructor++`]]
:initialize-address-uint48-uint48-uint48-address: pass:normal[xref:#VestingWalletCliffExecutorConfidential-initialize-address-uint48-uint48-uint48-address-[`++initialize++`]]

[.contract]
[[VestingWalletCliffExecutorConfidential]]
=== `++VestingWalletCliffExecutorConfidential++` link:https://github.com/OpenZeppelin/openzeppelin-confidential-contracts/blob/master/contracts/finance/VestingWalletCliffExecutorConfidentialFactory.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "@openzeppelin/confidential-contracts/finance/VestingWalletCliffExecutorConfidentialFactory.sol";
```

[.contract-index]
.Functions
--
* `++constructor()++`
* `++initialize(beneficiary, startTimestamp, durationSeconds, cliffSeconds, executor)++`

[.contract-subindex-inherited]
.ERC7821WithExecutor
* `++executor()++`
* `++__ERC7821WithExecutor_init(executor_)++`
* `++_erc7821AuthorizedExecutor(caller, mode, executionData)++`

[.contract-subindex-inherited]
.ERC7821
* `++execute(mode, executionData)++`
* `++supportsExecutionMode(mode)++`

[.contract-subindex-inherited]
.IERC7821

[.contract-subindex-inherited]
.VestingWalletCliffConfidential
* `++cliff()++`
* `++__VestingWalletCliffConfidential_init(cliffSeconds)++`
* `++_vestingSchedule(totalAllocation, timestamp)++`

[.contract-subindex-inherited]
.VestingWalletConfidential
* `++start()++`
* `++duration()++`
* `++end()++`
* `++released(token)++`
* `++releasable(token)++`
* `++release(token)++`
* `++vestedAmount(token, timestamp)++`
* `++__VestingWalletConfidential_init(beneficiary, startTimestamp, durationSeconds)++`

[.contract-subindex-inherited]
.ReentrancyGuardTransient
* `++_reentrancyGuardEntered()++`

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++__Ownable_init(initialOwner)++`
* `++__Ownable_init_unchained(initialOwner)++`
* `++owner()++`
* `++_checkOwner()++`
* `++renounceOwnership()++`
* `++transferOwnership(newOwner)++`
* `++_transferOwnership(newOwner)++`

[.contract-subindex-inherited]
.ContextUpgradeable
* `++__Context_init()++`
* `++__Context_init_unchained()++`
* `++_msgSender()++`
* `++_msgData()++`
* `++_contextSuffixLength()++`

[.contract-subindex-inherited]
.Initializable
* `++_checkInitializing()++`
* `++_disableInitializers()++`
* `++_getInitializedVersion()++`
* `++_isInitializing()++`
* `++_initializableStorageSlot()++`

--

[.contract-index]
.Events
--

[.contract-subindex-inherited]
.ERC7821WithExecutor

[.contract-subindex-inherited]
.ERC7821

[.contract-subindex-inherited]
.IERC7821

[.contract-subindex-inherited]
.VestingWalletCliffConfidential

[.contract-subindex-inherited]
.VestingWalletConfidential
* `++VestingWalletConfidentialTokenReleased(token, amount)++`

[.contract-subindex-inherited]
.ReentrancyGuardTransient

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++OwnershipTransferred(previousOwner, newOwner)++`

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable
* `++Initialized(version)++`

--

[.contract-index]
.Errors
--

[.contract-subindex-inherited]
.ERC7821WithExecutor

[.contract-subindex-inherited]
.ERC7821
* `++UnsupportedExecutionMode()++`

[.contract-subindex-inherited]
.IERC7821

[.contract-subindex-inherited]
.VestingWalletCliffConfidential
* `++VestingWalletCliffConfidentialInvalidCliffDuration(cliffSeconds, durationSeconds)++`

[.contract-subindex-inherited]
.VestingWalletConfidential

[.contract-subindex-inherited]
.ReentrancyGuardTransient
* `++ReentrancyGuardReentrantCall()++`

[.contract-subindex-inherited]
.OwnableUpgradeable
* `++OwnableUnauthorizedAccount(account)++`
* `++OwnableInvalidOwner(owner)++`

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable
* `++InvalidInitialization()++`
* `++NotInitializing()++`

--

[.contract-item]
[[VestingWalletCliffExecutorConfidential-constructor--]]
==== `[.contract-item-name]#++constructor++#++()++` [.item-kind]#public#

[.contract-item]
[[VestingWalletCliffExecutorConfidential-initialize-address-uint48-uint48-uint48-address-]]
==== `[.contract-item-name]#++initialize++#++(address beneficiary, uint48 startTimestamp, uint48 durationSeconds, uint48 cliffSeconds, address executor)++` [.item-kind]#public#

:ERC7821WithExecutorStorage: pass:normal[xref:#ERC7821WithExecutor-ERC7821WithExecutorStorage[`++ERC7821WithExecutorStorage++`]]
:executor: pass:normal[xref:#ERC7821WithExecutor-executor--[`++executor++`]]
:__ERC7821WithExecutor_init: pass:normal[xref:#ERC7821WithExecutor-__ERC7821WithExecutor_init-address-[`++__ERC7821WithExecutor_init++`]]
:_erc7821AuthorizedExecutor: pass:normal[xref:#ERC7821WithExecutor-_erc7821AuthorizedExecutor-address-bytes32-bytes-[`++_erc7821AuthorizedExecutor++`]]

:executor-: pass:normal[xref:#ERC7821WithExecutor-executor--[`++executor++`]]
:__ERC7821WithExecutor_init-address: pass:normal[xref:#ERC7821WithExecutor-__ERC7821WithExecutor_init-address-[`++__ERC7821WithExecutor_init++`]]
:_erc7821AuthorizedExecutor-address-bytes32-bytes: pass:normal[xref:#ERC7821WithExecutor-_erc7821AuthorizedExecutor-address-bytes32-bytes-[`++_erc7821AuthorizedExecutor++`]]

[.contract]
[[ERC7821WithExecutor]]
=== `++ERC7821WithExecutor++` link:https://github.com/OpenZeppelin/openzeppelin-confidential-contracts/blob/master/contracts/finance/ERC7821WithExecutor.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "@openzeppelin/confidential-contracts/finance/ERC7821WithExecutor.sol";
```

Extension of `ERC7821` that adds an {executor} address that is able to execute arbitrary calls via `ERC7821.execute`.

[.contract-index]
.Functions
--
* `++executor()++`
* `++__ERC7821WithExecutor_init(executor_)++`
* `++_erc7821AuthorizedExecutor(caller, mode, executionData)++`

[.contract-subindex-inherited]
.ERC7821
* `++execute(mode, executionData)++`
* `++supportsExecutionMode(mode)++`

[.contract-subindex-inherited]
.IERC7821

[.contract-subindex-inherited]
.Initializable
* `++_checkInitializing()++`
* `++_disableInitializers()++`
* `++_getInitializedVersion()++`
* `++_isInitializing()++`
* `++_initializableStorageSlot()++`

--

[.contract-index]
.Events
--

[.contract-subindex-inherited]
.ERC7821

[.contract-subindex-inherited]
.IERC7821

[.contract-subindex-inherited]
.Initializable
* `++Initialized(version)++`

--

[.contract-index]
.Errors
--

[.contract-subindex-inherited]
.ERC7821
* `++UnsupportedExecutionMode()++`

[.contract-subindex-inherited]
.IERC7821

[.contract-subindex-inherited]
.Initializable
* `++InvalidInitialization()++`
* `++NotInitializing()++`

--

[.contract-item]
[[ERC7821WithExecutor-executor--]]
==== `[.contract-item-name]#++executor++#++() → address++` [.item-kind]#public#

Trusted address that is able to execute arbitrary calls from the vesting wallet via `ERC7821.execute`.

[.contract-item]
[[ERC7821WithExecutor-__ERC7821WithExecutor_init-address-]]
==== `[.contract-item-name]#++__ERC7821WithExecutor_init++#++(address executor_)++` [.item-kind]#internal#

[.contract-item]
[[ERC7821WithExecutor-_erc7821AuthorizedExecutor-address-bytes32-bytes-]]
==== `[.contract-item-name]#++_erc7821AuthorizedExecutor++#++(address caller, bytes32 mode, bytes executionData) → bool++` [.item-kind]#internal#

Access control mechanism for the {execute} function.
By default, only the contract itself is allowed to execute.

Override this function to implement custom access control, for example to allow the
ERC-4337 entrypoint to execute.

```solidity
function _erc7821AuthorizedExecutor(
  address caller,
  bytes32 mode,
  bytes calldata executionData
) internal view virtual override returns (bool) {
  return caller == address(entryPoint()) || super._erc7821AuthorizedExecutor(caller, mode, executionData);
}
```

